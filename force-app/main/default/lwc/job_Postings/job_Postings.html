<template>
    <lightning-card title="Job Postings" icon-name="standard:job_posting">
        <lightning-button
            label="Create New Job Posting"
            onclick={openModal}
            class="slds-m-bottom_medium">
        </lightning-button>


        <lightning-datatable
            key-field="id"
            data={jobPostings}
            columns={columns}
            hide-checkbox-column
            is-loading={isLoading}>
        </lightning-datatable>

        <template if:true={isModalOpen}>
            <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" class="slds-modal slds-fade-in-open">
                <div class="slds-modal__container">
               
                    <header class="slds-modal__header">
                        <h2 id="modal-heading-01" class="slds-text-heading_medium">Create New Job Posting</h2>
                        <button class="slds-button slds-button_icon slds-modal__close" onclick={closeModal} title="Close">
                            <lightning-icon icon-name="utility:close" size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                    </header>


                    <div class="slds-modal__content slds-p-around_medium">
                        <lightning-record-edit-form
                            object-api-name="Job_Posting__c"
                            onsuccess={handleSuccess}
                            onsubmit={handleSubmit}>

                            <lightning-input-field field-name="Role__c"></lightning-input-field>
                            <lightning-input-field field-name="CTC_Budget__c"></lightning-input-field>
                            <lightning-input-field field-name="Employment_Type__c"></lightning-input-field>
                            <lightning-input-field field-name="Experience__c"></lightning-input-field>
                            <lightning-input-field field-name="Job_Description__c"></lightning-input-field>
                            <lightning-input-field field-name="Key_Responsibilities__c"></lightning-input-field>
                            <lightning-input-field field-name="Location__c"></lightning-input-field>
                            <lightning-input-field field-name="Notice_Period__c"></lightning-input-field>
                            <lightning-input-field field-name="Additional_Notes__C"></lightning-input-field>


                            <div class="slds-m-top_medium">
                                <lightning-button
                                    label="Cancel"
                                    onclick={closeModal}
                                    class="slds-m-right_small">
                                </lightning-button>
                                <lightning-button
                                    type="submit"
                                    label="Save"
                                    variant="brand">
                                </lightning-button>
                            </div>
                        </lightning-record-edit-form>
                    </div>
                </div>
            </section>
            <div class="slds-backdrop slds-backdrop_open"></div>
        </template>
    </lightning-card>
    
</template>